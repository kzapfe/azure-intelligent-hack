---
title: "setup"
bg: lightgreen
color: black
fa-icon: toggle-on
---

## Setup your development environment

This hackathon excercises the following platforms or services:

- Visual Studio 2017
- Xamarin (Xamarin.Forms)
- Azure Functions (C#/.NET)
- Azure Storage Account (blob)
- Azure Cosmos DB (SQL/DocumentDB)
- Cognitive Services Custom Vision

Recommended tools:

+ (Required) Visual Studio 2017 with the following packages installed:
  1. Mobile Development with .NET
  2. Azure Development
+ (Extension) Azure Functions and Web Jobs Tools version 15.0.31201.0 or higher
+ Visual Studio for Mac (optional for Android, required for iOS)

## Allocation of resources

Clone the GitHub repo:

`git clone https://github.com/rcervantes/azure-intelligent-hack.git`

Click on the button Deploy to Azure to configure and recreate the Azure resources:

<div style="text-align:center">
  <img src="https://azuredeploy.net/deploybutton.png" />
</div>

Parameters:

- **Directory:** name of the directory that hosts your subscription.
- **Subscription:** name of the subscription you want to perform the deployment.
- **Resource Group:** confirm to create a new resource group.
- **Resource Group Name:** name of the resource group you want to use.
- **Site Location:** name of the location of the resource group and all the resources.
- **Storage Account Type:** type of storage: locally redundant storage (LRS), geo-redundant storage (GRS) or read-access geo-redundant storage (RA-GRS).
- **Database Consistency Level:** session is default, but the CosmosDB parameters are: eventual, strong, session, boundedstaleness.
- **Database Max Staleness Prefix:** 10 is default.
- **Database Max Interval In Seconds:** 5 is default.
- **Face Api Pricing Tier:** S0 is default, F0 (20 calls per minute, 30K calls per month) or S0 (10 calls per second).

<div style="text-align:center">
  <img src="http://rcervantes.me/azure-intelligent-hack/images/azure-deployment-1.png" width="500" />
</div>

<br />

<div style="text-align:center">
  <img src="http://rcervantes.me/azure-intelligent-hack/images/azure-deployment-2.png" width="500" />
</div>

<br />

<div style="text-align:center">
  <img src="http://rcervantes.me/azure-intelligent-hack/images/azure-deployment-3.png" width="500" />
</div>

<br />

After create the resources you can validate it in your portal, e.g.:

- **Resource Group:** azure-intelligent-hack5c74
- **Azure Service Plan:** azure-intelligent-hack5c74-asp
- **Azure Database:** azure-intelligent-hack5c74-cos
- **Face API:** azure-intelligent-hack5c74-fac
- **Azure Function:** azure-intelligent-hack5c74-fun
- **Storage:** (unique-identifier)stg

<div style="text-align:center">
  <img src="http://rcervantes.me/azure-intelligent-hack/images/azure-resources.png" width="500" />
</div>

<br />

## Configuration of resources

At this point you have to ways to configure the backend: **using a shell script** or **manually**.

#### Using a Azure Cloud Shell

<div style="text-align:center">
  <img src="http://rcervantes.me/azure-intelligent-hack/images/azure-configuration-script.png" width="500" />
</div>

<br />

- Go to the Azure Portal and configure Azure Cloud Shell.
- Upload the file: azureconfig.sh to the Azure Cloud Shell storage, [more details](https://docs.microsoft.com/en-us/azure/cloud-shell/persisting-shell-storage).
- Open an Azure Cloud Shell terminal and execute the script: ./azureconfig.sh
- Open a navigation tab and paste the authentication code provided in the url: `https://aka.ms/devicelogin`.
- Select the id of the subscription you have previously deployed the resources.
- Validate the correct subscription and type yes.
- Paste the name of the resource group name you did the deploy.
- Now, the database has been configured and will prompt the region for Face API, use the same as you selected in the One-Click-Deploy site location.
- Once the database and face api has been configured you will need to add the cryptography key, the app center key for android and ios and you will finish the automation configuration.
- Publish the azure function app to the cloud, all the settings needed are already configured.
- Open the Azure Functions project with Visual Studio 2017 then compile and publish to Azure.
  - Ensure you have the latest version of the following extensions: Azure Functions and Web Jobs Tools.

Azureconfig.sh script is responsible for:
  - Configure CosmosDB account.
  - Configure Face API account.
  - Configure Azure Functions.

